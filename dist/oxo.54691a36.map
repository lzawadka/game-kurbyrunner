{"version":3,"sources":["js/libs/oxo.js"],"names":["window","oxo","width","innerWidth","height","innerHeight","animation","move","element","direction","distance","allowOutside","console","error","position","getPosition","newPosition","computeNewPosition","elPos","getBoundingClientRect","x","y","elements","obstacles","length","elFuturePos","Object","assign","every","obstacle","elementsAreColliding","setPosition","style","transform","match","RegExp","values","map","value","parseInt","replace","translation","getMovableElement","movableElement","document","querySelector","speed","getAttribute","moveElementWithArrowKeys","interval","pressed","pixels","Math","round","log","addEventListener","event","key","indexOf","toLowerCase","push","setInterval","requestAnimationFrame","inputs","getDirectionFromPressedKeys","filter","clearInterval","createElement","params","type","class","split","forEach","className","classList","add","styles","appendElement","appendTo","hostSelector","host","body","appendChild","onLeaveScreen","action","completly","once","observer","IntersectionObserver","entries","entry","isIntersecting","disconnect","root","rootMargin","threshold","observe","onLeaveScreenOnce","onCollisionWithElement","target","colliding","onCollisionWithElementOnce","element1Pos","element2Pos","keys","enter","space","left","up","right","down","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","z","keysListeners","listenKey","code","bind","listenKeys","listenArrowKeys","listenKeyOnce","cancelKeyListener","cancelKeysListeners","cancelKeysListener","cancelArrowKeysListeners","listenAllKeys","listener","keyCode","dir","dirPart","player","addToScore","points","setScore","getScore","localStorage","getItem","removeFromScore","newScore","max","setItem","refreshScore","scoreElement","getElement","innerText","screens","currentScreen","loadScreen","name","fetch","then","response","ok","text","html","innerHTML","setAttribute","call","getCurrentScreen","utils","getRandomNumber","min","floor","random","init","message","attribute"],"mappings":"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","file":"oxo.54691a36.map","sourceRoot":"../src","sourcesContent":["window.oxo = {\n  oxo: this,\n  width: window.innerWidth,\n  height: window.innerHeight,\n\n  animation: {\n    /**\n     * Modify the transform property of an element to make it move\n     * @param {HTMLElement} element - The element to move\n     * @param {string} direction - The direction\n     * @param {number} distance - The number of pixels for the move\n     * @param {allowOutside} boolean - If true, the element can go off limits\n     * @return {Object} - An object containing the updated position x and y\n     */\n    move(element, direction, distance, allowOutside) {\n      if (!element) {\n        console.error('The element to move was not found');\n        return;\n      }\n\n      if (!distance) {\n        console.error('You must provide a distance to move an element');\n        return;\n      }\n\n      var position = oxo.animation.getPosition(element);\n      var newPosition = oxo.animation.computeNewPosition(\n        position,\n        direction,\n        distance\n      );\n\n      var elPos = element.getBoundingClientRect();\n\n      if (!allowOutside) {\n        if (\n          newPosition.x + elPos.width > oxo.width ||\n          newPosition.x < 0 ||\n          newPosition.y + elPos.height > oxo.height ||\n          newPosition.y < 0\n        ) {\n          return;\n        }\n      }\n\n      if (oxo.elements.obstacles.length) {\n        var elFuturePos = Object.assign(elPos, {\n          x: newPosition.x,\n          y: newPosition.y,\n        });\n\n        if (\n          !oxo.elements.obstacles.every(function(obstacle) {\n            return (\n              obstacle == element ||\n              !oxo.elements.elementsAreColliding(\n                obstacle.getBoundingClientRect(),\n                elFuturePos\n              )\n            );\n          })\n        ) {\n          return;\n        }\n      }\n\n      oxo.animation.setPosition(element, newPosition);\n\n      return newPosition;\n    },\n\n    /**\n     * Modify a position object depending on direction and distance\n     * @param {Object} position - An object containing the x and y position\n     * @param {string} direction - The direction in which to move\n     * @param {number} distance - The distance to move\n     */\n    computeNewPosition(position, direction, distance) {\n      var newPosition = Object.assign({}, position);\n\n      switch (direction) {\n        case 'left':\n          newPosition.x -= distance;\n          break;\n        case 'left-up':\n          newPosition.y -= distance;\n          newPosition.x -= distance;\n          break;\n        case 'up':\n          newPosition.y -= distance;\n          break;\n        case 'right-up':\n          newPosition.y -= distance;\n          newPosition.x += distance;\n          break;\n        case 'right':\n          newPosition.x += distance;\n          break;\n        case 'right-down':\n          newPosition.x += distance;\n          newPosition.y += distance;\n          break;\n        case 'down':\n          newPosition.y += distance;\n          break;\n        case 'left-down':\n          newPosition.y += distance;\n          newPosition.x -= distance;\n          break;\n        default:\n          console.error(\n            'The direction provided (' + direction + ') is not valid'\n          );\n          return;\n      }\n\n      return newPosition;\n    },\n\n    /**\n     * Get the values of the translate property for the given element\n     * @param {HTMLElement} element - The element\n     * @return {Object} An object containing the x and the y position\n     */\n    getPosition(element) {\n      var position = element.style.transform.match(\n        new RegExp(/translate\\(.+\\)/)\n      );\n\n      if (position) {\n        var values = position[0].match(/-?\\d+/g).map(value => parseInt(value));\n        return {\n          x: values[0],\n          y: values[1],\n        };\n      } else {\n        return { x: 0, y: 0 };\n      }\n    },\n\n    /**\n     * Set the translate property of the given element\n     * @param {HTMLElement} element - The element to move\n     * @param {Object} position - An object containing the x and y values\n     * @return {string} - The updated transform property\n     */\n    setPosition(element, position) {\n      var transform = element.style.transform.replace(/translate\\(.+\\)/, '');\n\n      var translation = 'translate(' + position.x + 'px, ' + position.y + 'px)';\n\n      return (element.style.transform = transform + translation);\n    },\n\n    /**\n     * Search for an element that can be moved and call the adequate function\n     * @return {HTMLElement} the element moved\n     */\n    getMovableElement() {\n      var movableElement = document.querySelector('[data-oxo-movable]');\n\n      if (movableElement) {\n        var speed = movableElement.getAttribute('data-oxo-speed');\n        speed = speed ? speed : 10;\n        oxo.animation.moveElementWithArrowKeys(movableElement, speed);\n\n        return movableElement;\n      }\n    },\n\n    /**\n     * Move an element when the user press the arrow keys\n     * @param {HTMLElement} element - The element to move\n     * @param {number} speed - The speed of the movement\n     */\n    moveElementWithArrowKeys(element, speed) {\n      var interval;\n      var pressed = [];\n      var pixels = speed > 100 ? Math.round(speed / 100) : 1;\n      console.log(pixels);\n\n      document.addEventListener('keydown', function(event) {\n        if (event.key.indexOf('Arrow') === 0) {\n          var direction = event.key.replace('Arrow', '').toLowerCase();\n\n          if (pressed.indexOf(direction) === -1) {\n            pressed.push(direction);\n\n            if (!interval) {\n              interval = setInterval(function() {\n                window.requestAnimationFrame(function() {\n                  if (pressed.length) {\n                    oxo.animation.move(\n                      element,\n                      oxo.inputs.getDirectionFromPressedKeys(pressed),\n                      pixels,\n                      false\n                    );\n                  }\n                });\n              }, 100 / speed);\n            }\n          }\n        }\n      });\n\n      document.addEventListener('keyup', function(event) {\n        if (event.key.indexOf('Arrow') === 0) {\n          var direction = event.key.replace('Arrow', '').toLowerCase();\n\n          pressed = pressed.filter(key => key !== direction);\n          if (!pressed.length) {\n            clearInterval(interval);\n            interval = null;\n          }\n        }\n      });\n    },\n  },\n\n  elements: {\n    obstacles: [],\n    /**\n     * Create an HTML element\n     * @param {*} params - An object containing the element parameters\n     * @return {HTMLElement} The created element\n     */\n    createElement(params) {\n      var element = document.createElement(params.type ? params.type : 'div');\n\n      if (params.class) {\n        params.class.split(' ').forEach(function(className) {\n          element.classList.add(className);\n        });\n      }\n\n      if (params.styles) {\n        for (style in params.styles) {\n          element.style[style] = params.styles[style];\n        }\n      }\n\n      if (params.obstacle) {\n        oxo.elements.obstacles.push(element);\n      }\n\n      oxo.elements.appendElement(element, params.appendTo);\n\n      return element;\n    },\n\n    /**\n     * Append an element inside another one\n     * @param {HTMLElement} element - The element to append\n     * @param {string} hostSelector - The string to select the host element\n     */\n    appendElement(element, hostSelector) {\n      var host = hostSelector\n        ? document.querySelector(hostSelector)\n        : document.body;\n\n      if (!host) {\n        console.error('No element was found for selector ', +hostSelector);\n        return;\n      }\n\n      host.appendChild(element);\n    },\n\n    /**\n     * Execute an action when the given element collides with the border\n     * @param {HTMLElement} element - The element to observe\n     * @param {Function} action - The action to execute\n     * @param {boolean} completly - If true, the whole element must be outside\n     * @param {boolean} once - If true, the action will be executed only once\n     * @return {IntersectionObserver} - The observer\n     */\n    onLeaveScreen(element, action, completly, once) {\n      var observer = new IntersectionObserver(\n        function(entries) {\n          entries.forEach(function(entry) {\n            if (!entry.isIntersecting) {\n              action();\n\n              if (once) {\n                observer.disconnect();\n              }\n            }\n          });\n        },\n        {\n          root: null,\n          rootMargin: '0px',\n          threshold: completly ? 0 : 1,\n        }\n      );\n      observer.observe(element);\n\n      return observer;\n    },\n\n    /**\n     * Execute an action once the given element collides with the border\n     * @param {HTMLElement} element - The element to observe\n     * @param {Function} action - The action to execute\n     * @param {boolean} completly - If true, the whole element must be outside\n     * @return {IntersectionObserver} - The observer\n     */\n    onLeaveScreenOnce(element, action, completly) {\n      return oxo.elements.onLeaveScreen(element, action, completly, true);\n    },\n\n    /**\n     * Execute an action when two element collides\n     * @param {HTMLElement} element - The element to observe\n     * @param {HTMLElement} target - The element to collide with\n     * @param {Function} action - The action to execute\n     * @param {boolean} once - If true, the action is executed only once\n     * @return {Interval} - The timer used for checking\n     */\n    onCollisionWithElement(element, target, action, once) {\n      var colliding = false;\n\n      var interval = setInterval(function() {\n        if (\n          oxo.elements.elementsAreColliding(\n            element.getBoundingClientRect(),\n            target.getBoundingClientRect()\n          )\n        ) {\n          if (!colliding) {\n            action();\n            colliding = true;\n\n            if (once) {\n              clearInterval(interval);\n            }\n          }\n        } else {\n          colliding = false;\n        }\n      }, 10);\n\n      return interval;\n    },\n\n    /**\n     * Execute an action once when two element collides\n     * @param {HTMLElement} element - The element to observe\n     * @param {HTMLElement} target - The element to collide with\n     * @param {Function} action - The action to execute\n     * @return {Interval} - The timer used for checking\n     */\n    onCollisionWithElementOnce(element, target, action) {\n      return oxo.elements.onCollisionWithElement(element, target, action, true);\n    },\n\n    /**\n     * Test if two elements are in collision\n     * @param {Object} element1Pos - The first element position\n     * @param {Object} element2Pos - The second element position\n     */\n    elementsAreColliding(element1Pos, element2Pos) {\n      return (\n        element1Pos.x < element2Pos.x + element2Pos.width &&\n        element1Pos.x + element1Pos.width > element2Pos.x &&\n        element1Pos.y < element2Pos.y + element2Pos.height &&\n        element1Pos.height + element1Pos.y > element2Pos.y\n      );\n    },\n  },\n\n  inputs: {\n    keys: {\n      enter: 13,\n      space: 32,\n      left: 37,\n      up: 38,\n      right: 39,\n      down: 40,\n      a: 65,\n      b: 66,\n      c: 67,\n      d: 68,\n      e: 69,\n      f: 70,\n      g: 71,\n      h: 72,\n      i: 73,\n      j: 74,\n      k: 75,\n      l: 76,\n      m: 77,\n      n: 78,\n      o: 79,\n      p: 80,\n      q: 81,\n      r: 82,\n      s: 83,\n      t: 84,\n      u: 85,\n      v: 86,\n      w: 87,\n      x: 88,\n      y: 89,\n      z: 90,\n    },\n    keysListeners: {},\n\n    /**\n     * Execute the given action each time the given key is pressed\n     * @param {string} key - The key to press to trigger the action\n     * @param {Function} action - The function that will be executed\n     * @param {boolean} once - If true, the action will be executed only once\n     */\n    listenKey(key, action, once) {\n      if (!once) {\n        once = false;\n      }\n\n      var code = oxo.inputs.keys[key];\n\n      if (!code) {\n        console.error('The key \"' + code + '\" cannot be found');\n        return;\n      }\n\n      oxo.inputs.keysListeners[code] = {\n        action: action.bind(this, key),\n        once: once,\n      };\n    },\n\n    /**\n     * Execute the given action each time one of the given key is pressed\n     * @param {Array<string>} keys - The keys that should trigger the action\n     * @param {Function} action - The action to execute\n     */\n    listenKeys(keys, action) {\n      keys.forEach(function(key) {\n        oxo.inputs.listenKey(key, action);\n      });\n    },\n\n    /**\n     * Execute the given action each time an arrow key is pressed\n     * @param {Function} action - The action to execute\n     */\n    listenArrowKeys(action) {\n      oxo.inputs.listenKeys(['left', 'up', 'right', 'down'], action);\n    },\n\n    /**\n     * Execute the given action the next time the given key is pressed\n     * @param {string} key - The key to press to trigger the action\n     * @param {Function} action - The function that will be executed\n     * */\n    listenKeyOnce(key, action) {\n      oxo.inputs.listenKey(key, action, true);\n    },\n\n    /**\n     * Cancel the listener for the given key\n     * @param {string} key - The key to stop listening to\n     */\n    cancelKeyListener(key) {\n      delete oxo.inputs.keysListeners[oxo.inputs.keys[key]];\n    },\n\n    /**\n     * Cancel the listeners for several keys\n     * @param {Array<string>} - The keys to stop listening to\n     */\n    cancelKeysListeners(keys) {\n      keys.forEach(function(key) {\n        oxo.inputs.cancelKeysListener(key);\n      });\n    },\n\n    /** Cancel the listening of arrow keys */\n    cancelArrowKeysListeners() {\n      oxo.inputs.cancelKeysListener(['left', 'up', 'right', 'down']);\n    },\n\n    /**\n     * This method will be executed on initialization to listen all the keys\n     */\n    listenAllKeys() {\n      document.addEventListener('keydown', function(event) {\n        listener = oxo.inputs.keysListeners[event.keyCode];\n        if (listener) {\n          listener.action();\n\n          if (listener.once) {\n            delete oxo.inputs.keysListeners[event.keyCode];\n          }\n        }\n      });\n    },\n\n    /**\n     * Get the direction by combining the differents keys pressed\n     * @param {Array<string>} pressed - The direction currently pressed\n     * @return {string} the direction\n     */\n    getDirectionFromPressedKeys(pressed) {\n      var direction = pressed[0];\n\n      ['left-up', 'left-down', 'right-up', 'right-down'].forEach(function(dir) {\n        if (\n          dir.split('-').every(function(dirPart) {\n            return pressed.indexOf(dirPart) > -1;\n          })\n        ) {\n          direction = dir;\n        }\n      });\n\n      return direction;\n    },\n  },\n\n  player: {\n    /**\n     * Add one or several points to the score\n     * @param {number} points - The number of points to add\n     * @return {number} The new score\n     */\n    addToScore(points) {\n      oxo.log('Add ' + points + ' points to the score');\n\n      return oxo.player.setScore(oxo.player.getScore() + points);\n    },\n\n    /**\n     * Get the score\n     * @return {number} The score\n     */\n    getScore() {\n      return parseInt(localStorage.getItem('score'));\n    },\n\n    /**\n     * Remove one or several points from the score\n     * @param {number} points - The number of points to remove\n     * @return {number} The new score\n     */\n    removeFromScore(points) {\n      var newScore = Math.max(0, oxo.player.getScore() - points);\n      oxo.log('Remove ' + points + ' points from the score');\n\n      return oxo.player.setScore(newScore);\n    },\n\n    /**\n     * Set the score\n     * @param {number} points - The score\n     * @return {number} The score\n     */\n    setScore(points) {\n      localStorage.setItem('score', points);\n      oxo.log('New score is ' + points);\n\n      oxo.player.refreshScore();\n\n      return points;\n    },\n\n    /**\n     * Refresh the score display\n     */\n    refreshScore() {\n      var scoreElement = oxo.getElement('score');\n\n      if (scoreElement) {\n        scoreElement.innerText = oxo.player.getScore();\n      }\n    },\n  },\n\n  screens: {\n    currentScreen: '',\n    /**\n     * Load a new screen (and add matching class to the body)\n     * @param {string} name - The name of the html file for the screen to load\n     * @param {Function} action - The function to execute after loading\n     * @return {Promise} - The fetch promise\n     */\n    loadScreen(name, action) {\n      return fetch('../../screens/' + name + '.html').then(function(response) {\n        if (response.ok) {\n          response.text().then(function(html) {\n            document.body.innerHTML = html;\n            document.body.setAttribute('class', name);\n            oxo.log('Load screen ' + name);\n            oxo.player.refreshScore();\n            oxo.animation.getMovableElement();\n            oxo.screens.currentScreen = name;\n\n            if (action) {\n              action.call();\n            }\n          });\n        }\n      });\n    },\n\n    /**\n     * Get the name of the current screen\n     * @return {string} the current screen\n     */\n    getCurrentScreen() {\n      return oxo.screens.currentScreen;\n    },\n  },\n\n  utils: {\n    /**\n     * Get a random number between two limits\n     * @param {number} min - The min number\n     * @param {number} max - The max number\n     * @return {number} - The random number\n     */\n    getRandomNumber(min, max) {\n      return Math.floor(Math.random() * (max - min + 1) + min);\n    },\n  },\n\n  /**\n   * A function that will be run when oxo is called in order to init the game\n   */\n  init() {\n    oxo.screens.loadScreen('home');\n    oxo.inputs.listenAllKeys();\n    oxo.player.setScore(0);\n  },\n\n  /**\n   * Pretty logger for oxo events\n   * @param {string} message - The information to log\n   */\n  log(message) {\n    console.log('%c OXO: ' + message, 'background-color: gold; padding: 5px');\n  },\n\n  /**\n   * Find an element with an oxo data attribute in the DOM\n   * @param {string} attribute - The data attribute of the element (oxo-data-*)\n   */\n  getElement(attribute) {\n    return document.querySelector('[data-oxo-' + attribute + ']');\n  },\n};\n\nwindow.oxo.init();"]}