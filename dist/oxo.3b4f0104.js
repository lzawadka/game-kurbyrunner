parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"i3WZ":[function(require,module,exports) {
window.oxo={oxo:this,width:window.innerWidth,height:window.innerHeight,animation:{move:function(e,n,o,t){if(e)if(o){var r=oxo.animation.getPosition(e),i=oxo.animation.computeNewPosition(r,n,o),s=e.getBoundingClientRect();if(t||!(i.x+s.width>oxo.width||i.x<0||i.y+s.height>oxo.height||i.y<0)){if(oxo.elements.obstacles.length){var c=Object.assign(s,{x:i.x,y:i.y});if(!oxo.elements.obstacles.every(function(n){return n==e||!oxo.elements.elementsAreColliding(n.getBoundingClientRect(),c)}))return}return oxo.animation.setPosition(e,i),i}}else console.error("You must provide a distance to move an element");else console.error("The element to move was not found")},computeNewPosition:function(e,n,o){var t=Object.assign({},e);switch(n){case"left":t.x-=o;break;case"left-up":t.y-=o,t.x-=o;break;case"up":t.y-=o;break;case"right-up":t.y-=o,t.x+=o;break;case"right":t.x+=o;break;case"right-down":t.x+=o,t.y+=o;break;case"down":t.y+=o;break;case"left-down":t.y+=o,t.x-=o;break;default:return void console.error("The direction provided ("+n+") is not valid")}return t},getPosition:function(e){var n=e.style.transform.match(new RegExp(/translate\(.+\)/));if(n){var o=n[0].match(/-?\d+/g).map(function(e){return parseInt(e)});return{x:o[0],y:o[1]}}return{x:0,y:0}},setPosition:function(e,n){var o=e.style.transform.replace(/translate\(.+\)/,""),t="translate("+n.x+"px, "+n.y+"px)";return e.style.transform=o+t},getMovableElement:function(){var e=document.querySelector("[data-oxo-movable]");if(e){var n=e.getAttribute("data-oxo-speed");return n=n||10,oxo.animation.moveElementWithArrowKeys(e,n),e}},moveElementWithArrowKeys:function(e,n){var o,t=[],r=n>100?Math.round(n/100):1;console.log(r),document.addEventListener("keydown",function(i){if(0===i.key.indexOf("Arrow")){var s=i.key.replace("Arrow","").toLowerCase();-1===t.indexOf(s)&&(t.push(s),o||(o=setInterval(function(){window.requestAnimationFrame(function(){t.length&&oxo.animation.move(e,oxo.inputs.getDirectionFromPressedKeys(t),r,!1)})},100/n)))}}),document.addEventListener("keyup",function(e){if(0===e.key.indexOf("Arrow")){var n=e.key.replace("Arrow","").toLowerCase();(t=t.filter(function(e){return e!==n})).length||(clearInterval(o),o=null)}})}},elements:{obstacles:[],createElement:function(e){var n=document.createElement(e.type?e.type:"div");if(e.class&&e.class.split(" ").forEach(function(e){n.classList.add(e)}),e.styles)for(style in e.styles)n.style[style]=e.styles[style];return e.obstacle&&oxo.elements.obstacles.push(n),oxo.elements.appendElement(n,e.appendTo),n},appendElement:function(e,n){var o=n?document.querySelector(n):document.body;o?o.appendChild(e):console.error("No element was found for selector ",+n)},onLeaveScreen:function(e,n,o,t){var r=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting||(n(),t&&r.disconnect())})},{root:null,rootMargin:"0px",threshold:o?0:1});return r.observe(e),r},onLeaveScreenOnce:function(e,n,o){return oxo.elements.onLeaveScreen(e,n,o,!0)},onCollisionWithElement:function(e,n,o,t){var r=!1,i=setInterval(function(){oxo.elements.elementsAreColliding(e.getBoundingClientRect(),n.getBoundingClientRect())?r||(o(),r=!0,t&&clearInterval(i)):r=!1},10);return i},onCollisionWithElementOnce:function(e,n,o){return oxo.elements.onCollisionWithElement(e,n,o,!0)},elementsAreColliding:function(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.height+e.y>n.y}},inputs:{keys:{enter:13,space:32,left:37,up:38,right:39,down:40,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},keysListeners:{},listenKey:function(e,n,o){o||(o=!1);var t=oxo.inputs.keys[e];t?oxo.inputs.keysListeners[t]={action:n.bind(this,e),once:o}:console.error('The key "'+t+'" cannot be found')},listenKeys:function(e,n){e.forEach(function(e){oxo.inputs.listenKey(e,n)})},listenArrowKeys:function(e){oxo.inputs.listenKeys(["left","up","right","down"],e)},listenKeyOnce:function(e,n){oxo.inputs.listenKey(e,n,!0)},cancelKeyListener:function(e){delete oxo.inputs.keysListeners[oxo.inputs.keys[e]]},cancelKeysListeners:function(e){e.forEach(function(e){oxo.inputs.cancelKeysListener(e)})},cancelArrowKeysListeners:function(){oxo.inputs.cancelKeysListener(["left","up","right","down"])},listenAllKeys:function(){document.addEventListener("keydown",function(e){listener=oxo.inputs.keysListeners[e.keyCode],listener&&(listener.action(),listener.once&&delete oxo.inputs.keysListeners[e.keyCode])})},getDirectionFromPressedKeys:function(e){var n=e[0];return["left-up","left-down","right-up","right-down"].forEach(function(o){o.split("-").every(function(n){return e.indexOf(n)>-1})&&(n=o)}),n}},player:{addToScore:function(e){return oxo.log("Add "+e+" points to the score"),oxo.player.setScore(oxo.player.getScore()+e)},getScore:function(){return parseInt(localStorage.getItem("score"))},removeFromScore:function(e){var n=Math.max(0,oxo.player.getScore()-e);return oxo.log("Remove "+e+" points from the score"),oxo.player.setScore(n)},setScore:function(e){return localStorage.setItem("score",e),oxo.log("New score is "+e),oxo.player.refreshScore(),e},refreshScore:function(){var e=oxo.getElement("score");e&&(e.innerText=oxo.player.getScore())}},screens:{currentScreen:"",loadScreen:function(e,n){return fetch("../../screens/"+e+".html").then(function(o){o.ok&&o.text().then(function(o){document.body.innerHTML=o,document.body.setAttribute("class",e),oxo.log("Load screen "+e),oxo.player.refreshScore(),oxo.animation.getMovableElement(),oxo.screens.currentScreen=e,n&&n.call()})})},getCurrentScreen:function(){return oxo.screens.currentScreen}},utils:{getRandomNumber:function(e,n){return Math.floor(Math.random()*(n-e+1)+e)}},init:function(){oxo.screens.loadScreen("home"),oxo.inputs.listenAllKeys(),oxo.player.setScore(0)},log:function(e){console.log("%c OXO: "+e,"background-color: gold; padding: 5px")},getElement:function(e){return document.querySelector("[data-oxo-"+e+"]")}},window.oxo.init();
},{}]},{},["i3WZ"], null)
//# sourceMappingURL=/oxo.3b4f0104.map